(function(e){function t(t){for(var n,a,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)a=o[d],i[a]&&p.push(i[a][0]),i[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={app:0},s=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00a2":function(e,t,r){"use strict";var n=r("0cf1"),i=r.n(n);i.a},"0b32":function(e,t,r){"use strict";var n=r("c9b0"),i=r.n(n);i.a},"0bf2":function(e,t,r){"use strict";var n=r("8d32"),i=r.n(n);i.a},"0cf1":function(e,t,r){},"0e99":function(e,t,r){},1454:function(e,t,r){},"15f1":function(e,t,r){},"17c5":function(e,t,r){},"17f5":function(e,t,r){"use strict";var n=r("9746"),i=r.n(n);i.a},"1d7d":function(e,t,r){"use strict";var n=r("1454"),i=r.n(n);i.a},2075:function(e,t,r){"use strict";var n=r("9f64"),i=r.n(n);i.a},3117:function(e,t,r){"use strict";var n=r("9542"),i=r.n(n);i.a},"31dc":function(e,t,r){"use strict";var n=r("17c5"),i=r.n(n);i.a},"3d04":function(e,t,r){"use strict";var n=r("0e99"),i=r.n(n);i.a},"48c6":function(e,t,r){},"4e08":function(e,t,r){},"4e99":function(e,t,r){"use strict";var n=r("fb45"),i=r.n(n);i.a},"51bc":function(e,t,r){"use strict";var n=r("80b8"),i=r.n(n);i.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("AppNav",{staticClass:"nav-bar"}),r("router-view")],1)},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav"},[n("img",{staticClass:"logo",attrs:{alt:"logo",src:r("cf05")},on:{click:e.moveHome}}),n("ul",[n("li",[e.isLoggedUser?n("button",{staticClass:"logout",on:{click:e.doLogout}},[e._v("Logout")]):e._e()]),n("li",[e.isLoggedUser?e._e():n("router-link",{attrs:{to:"/signin"}},[e._v("Sign in")])],1),n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Home")])],1),n("li",[e.isLoggedUser?n("router-link",{attrs:{to:"/user/"+e.isLoggedUser._id}},[e._v("Welcome "+e._s(e.isLoggedUser.firstName))]):e._e()],1)])])},o=[],u={name:"AppNav",computed:{isLoggedUser:function(){return this.$store.getters.loggedUser}},methods:{moveHome:function(){this.$router.push("/")},doLogout:function(){this.$store.dispatch({type:"logout"}),this.$router.push("/")}}},c=u,l=(r("6c2a"),r("2877")),d=Object(l["a"])(c,a,o,!1,null,"f17e4126",null),p=d.exports,m={components:{AppNav:p}},v=m,h=(r("5c0b"),Object(l["a"])(v,i,s,!1,null,null,null)),f=h.exports,g=r("8c4f"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("header",{staticClass:"home-header"},[r("MainSearch",{staticClass:"welcome",attrs:{msg:"Welcome to uThere"}})],1),r("div",{staticClass:"activities container"},[r("h2",[e._v("Activities")]),r("ActivityList",{attrs:{cityName:e.cityName}})],1),r("div",{staticClass:"users container"},[r("h2",[e._v("Ready To Meet You")]),r("UserList",{attrs:{usersToShow:e.allUsers}})],1),r("div",{staticClass:"cities container"},[r("h2",[e._v("cities")]),r("CityList")],1)])},w=[],b=(r("96cf"),r("3b8d")),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"MainSearch"},[r("h1",[e._v(e._s(e.msg))]),r("p",{staticClass:"subheader"},[e._v("\n    Meet people who love the some activities as you all over the world!\n    ")]),r("div",{staticClass:"searchBlock"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.load(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.cityName,expression:"filterBy.cityName"}],staticClass:"SearchInput",attrs:{type:"text",placeholder:"Where are you going?"},domProps:{value:e.filterBy.cityName},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"cityName",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.activity,expression:"filterBy.activity"}],staticClass:"SearchInput",attrs:{type:"text",placeholder:"What would you like to do?"},domProps:{value:e.filterBy.activity},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"activity",t.target.value)}}}),r("button",{staticClass:"button"},[e._v("Search")])])])])},x=[],C={name:"MainSearch",props:{msg:String},data:function(){return{filterBy:{cityName:"",activity:""}}},created:function(){},methods:{load:function(){this.$router.push({path:"/city/".concat(this.filterBy.cityName),query:{fromSearchBox:"1",activity:this.filterBy.activity}})}}},R=C,U=(r("9b9d"),Object(l["a"])(R,_,x,!1,null,"db40be2e",null)),j=U.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"city-list"},e._l(e.cities,function(e,t){return r("CityPreview",{key:t,attrs:{city:e}})}),1)},$=[],I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.city?r("section",{staticClass:"city-preview",on:{click:e.goToDetails}},[r("img",{attrs:{src:e.city.img_url}}),r("div",{staticClass:"info-panel"},[r("p",{staticClass:"name"},[e._v(e._s(e.city.name))])])]):e._e()},N=[],k=(r("7f7f"),{name:"TheCityPreview",props:["city"],methods:{goToDetails:function(){this.$router.push({path:"/city/".concat(this.city.name),query:{fromSearchBox:"0"}})}}}),P=k,B=(r("911c"),Object(l["a"])(P,I,N,!1,null,"7e5365fe",null)),S=B.exports,M={name:"TheCityList",components:{CityPreview:S},computed:{cities:function(){return this.$store.getters.cities}}},L=M,A=(r("0bf2"),Object(l["a"])(L,O,$,!1,null,"46daec82",null)),q=A.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-list"},e._l(e.usersToShow,function(e){return r("UserPreview",{key:e._id,attrs:{user:e}})}),1)},E=[],W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",{staticClass:"user-preview",on:{click:e.goToDetails}},[r("img",{attrs:{src:e.user.img_url}}),r("div",{staticClass:"info-panel"},[r("p",{staticClass:"name"},[e._v(e._s(e.user.firstName)+" "),r("span",{staticClass:"city"},[e._v(e._s(e.user.currCity))])]),r("p",[e._v("Rank: "+e._s(e.user.rank))]),r("p",[e._v("Activities: "+e._s(e.user.activities[0]))]),r("p",[e._v("Replies "+e._s(e.user.replies))]),r("div",{staticClass:"meet-count"},[e._v("meetings: "+e._s(e.user.meetCount))])])]):e._e()},D=[],F={name:"TheUserPreview",props:["user"],methods:{goToDetails:function(){this.$router.push("/user/".concat(this.user._id))}}},Y=F,G=(r("b2e0"),Object(l["a"])(Y,W,D,!1,null,"7a860558",null)),H=G.exports,J={name:"TheUserList",components:{UserPreview:H},props:["usersToShow"]},z=J,V=(r("17f5"),Object(l["a"])(z,T,E,!1,null,"1d2ac28a",null)),K=V.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"activity-list"},e._l(e.activities,function(t,n){return r("ActivityPreview",{key:n,attrs:{activity:t,cityName:e.cityName}})}),1)},X=[],Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.activity?r("section",{staticClass:"activity-preview",on:{click:e.goToActivity}},[r("img",{attrs:{src:e.activity.img_url}}),r("div",{staticClass:"info-panel"},[r("p",{staticClass:"name"},[e._v(e._s(e.activity.name))])])]):e._e()},ee=[],te={name:"TheActivityPreview",props:["activity","cityName"],methods:{goToActivity:function(){this.$router.push({path:"/activity/".concat(this.activity.name),query:{cityName:this.cityName}})}}},re=te,ne=(r("1d7d"),Object(l["a"])(re,Z,ee,!1,null,"03e2a461",null)),ie=ne.exports,se={name:"TheActivityList",props:["cityName"],components:{ActivityPreview:ie},created:function(){this.$store.dispatch({type:"loadActivityByCity",filterBy:{cityName:this.cityName}})},computed:{activities:function(){return this.$store.getters.activities}}},ae=se,oe=(r("31dc"),Object(l["a"])(ae,Q,X,!1,null,"23f0be63",null)),ue=oe.exports,ce={name:"home",data:function(){return{error:"",lat:"",lng:"",cityName:""}},methods:{showPosition:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.lat=t.coords.latitude,this.lng=t.coords.longitude,e.next=4,this.$store.dispatch({type:"getCityByCord",lat:this.lat,lng:this.lng});case 4:r=e.sent,this.cityName=r;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},components:{CityList:q,UserList:K,MainSearch:j,ActivityList:ue},computed:{allUsers:function(){return this.$store.getters.users}},created:function(){this.$store.dispatch("loadCities"),this.$store.dispatch("loadUsers"),this.$store.dispatch("loadActivities"),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):this.error="Geolocation is not supported."}},le=ce,de=(r("c669"),Object(l["a"])(le,y,w,!1,null,"434b55a2",null)),pe=de.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"main-container container"},[r("h1",[r("span",[e._v(e._s(e.cityName))]),e._v(" City\n    ")]),e.activity?r("div",{staticClass:"when-chosen-activity"},[r("h2",[e._v(e._s(e.activity))]),r("UserList",{attrs:{usersToShow:e.activityUsers}}),r("h2",[e._v("Dive")]),r("UserList",{attrs:{usersToShow:e.diveUsers}}),r("h2",[e._v("Fly")]),r("UserList",{attrs:{usersToShow:e.flyUsers}})],1):r("div",{staticClass:"default-activities"},[r("h2",[e._v("Drink coffee with friends")]),r("UserList",{attrs:{usersToShow:e.coffeeUsers}}),r("h2",[e._v("Walk")]),r("UserList",{attrs:{usersToShow:e.walkUsers}}),r("h2",[e._v("Run")]),r("UserList",{attrs:{usersToShow:e.runUsers}})],1)])])},ve=[],he=(r("6762"),r("2fdb"),{name:"TheCityView",components:{UserList:K},data:function(){return{cityName:"",activity:"",fromSearchBox:!1}},computed:{coffeeUsers:function(){return console.log(this.$store.getters.users),this.filterUsersByActivity("Drink coffee with a friend")},walkUsers:function(){return this.filterUsersByActivity("Walk")},runUsers:function(){return this.filterUsersByActivity("Run")},activityUsers:function(){return this.filterUsersByActivity(this.activity)},diveUsers:function(){return this.filterUsersByActivity("Dive")},flyUsers:function(){return this.filterUsersByActivity("Fly")}},methods:{filterUsersByActivity:function(e){return this.$store.getters.users.filter(function(t){return t.activities.includes(e)})}},created:function(){this.cityName=this.$route.params.cityName,this.fromSearchBox="1"===this.$route.query.fromSearchBox,this.activity=this.$route.query.activity,this.$store.dispatch({type:"loadUsersByCity",filterBy:{cityName:this.cityName}})}}),fe=he,ge=(r("c14a"),Object(l["a"])(fe,me,ve,!1,null,"9686ad2a",null)),ye=ge.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"wrapper"},[r("div",{staticClass:"side-bar"},[r("p",[e._v("I'm the side bar")]),r("inbox-nav")],1),r("div",{staticClass:"msg-container"},[r("p",[e._v("I'm the container for msgs")]),r("router-view")],1)])},be=[],_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",[r("li",[r("router-link",{attrs:{exact:"",to:"/inbox/:userId/chats"}},[e._v("Messages")])],1),r("li",[e._v("Upcoming")])])])},xe=[],Ce={data:function(){return{chats:[]}}},Re=Ce,Ue=Object(l["a"])(Re,_e,xe,!1,null,null,null),je=Ue.exports,Oe={components:{InboxNav:je},data:function(){return{chats:[]}}},$e=Oe,Ie=(r("3117"),Object(l["a"])($e,we,be,!1,null,null,null)),Ne=Ie.exports,ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",e._l(e.pairingChatUsers,function(t,n){return r("li",{key:n,attrs:{chat:t.chat,userWith:t.userWith},on:{click:function(r){return e.openChat(t.chat._id)}}},[r("chat-preview",{attrs:{chat:t.chat,userWith:t.userWith}})],1)}),0)])},Pe=[],Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.userWith&&e.chat?r("div",[r("img",{staticClass:"chat-img",attrs:{src:""+e.userWith.img_url,alt:"user-img"}}),e._v("\n    "+e._s(e.userWith.firstName)+" "+e._s(e.userWith.lastName)+"\n")]):e._e()},Se=[],Me={props:["chat","userWith"],data:function(){return{}}},Le=Me,Ae=(r("51bc"),Object(l["a"])(Le,Be,Se,!1,null,null,null)),qe=Ae.exports,Te={data:function(){return{}},methods:{openChat:function(e){this.$router.push("/inbox/".concat(this.userId,"/").concat(e))}},computed:{userId:function(){return this.$store.getters.loggedUser._id},userChats:function(){return this.$store.getters.userChats},userChatsWith:function(){return this.$store.getters.userChatsWith},pairingChatUsers:function(){var e=this;return this.userChats.map(function(t,r){return{chat:t,userWith:e.userChatsWith[r]}})}},created:function(){this.$store.dispatch("getLoggedUserId"),this.$store.dispatch("loadUserChatRooms")},components:{ChatPreview:qe}},Ee=Te,We=(r("2075"),Object(l["a"])(Ee,ke,Pe,!1,null,null,null)),De=We.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",e._l(e.chatRoom.msgs,function(t){return r("li",{key:t._id},[e._v(e._s(t.txt))])}),0),r("form",{staticClass:"send",on:{submit:function(t){return t.preventDefault(),e.addMsg(e.newMsg)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newMsg.txt,expression:"newMsg.txt"}],attrs:{newMsg:e.setType("txt"),type:"text",placeholder:"Write something...",name:"",id:""},domProps:{value:e.newMsg.txt},on:{input:function(t){t.target.composing||e.$set(e.newMsg,"txt",t.target.value)}}}),r("button",{attrs:{type:"submit"}},[e._v("Send")])])])},Ye=[],Ge=(r("8e6e"),r("ac6a"),r("456d"),r("bd86"));function He(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(r,!0).forEach(function(t){Object(Ge["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ze={data:function(){return{chatPrms:null,newMsg:{_id:null,addedBy:this.loggedInUserId,txt:null,type:null,sentAt:null,isRead:!1}}},methods:{addMsg:function(e){e.sentAt=Date.now();var t=Je({},e);this.$store.dispatch("addMsg",{addedMsg:t}),e.txt=null},setType:function(e){this.newMsg.type=e}},computed:{chatRoom:function(){return this.$store.getters.chatRoom},chatWith:function(){return this.$store.getters.chatWith},loggedInUserId:function(){return this.$store.getters.loggedInUserId}},created:function(){this.$route.params.chatRoomId,this.chatPrms=this.$route.params.chatRoomId,this.$store.dispatch("getLoggedUserId"),this.$store.dispatch("loadChat",{chatRoomId:this.chatPrms})}},Ve=ze,Ke=(r("b17a"),Object(l["a"])(Ve,Fe,Ye,!1,null,null,null)),Qe=Ke.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-details container"},[r("div",{staticClass:"top-fold"},[r("img",{staticClass:"user-img",attrs:{src:e.user.img_url,alt:""}}),r("div",{staticClass:"user-details-content"},[r("div",{staticClass:"user-info"},[r("h1",[e._v(e._s(e.user.firstName+" "+e.user.lastName))]),r("div",[e._v("from: "+e._s(e.user.currCity))]),r("div",[e._v("like to: "+e._s(e.user.activities[0]))]),r("div",[e._v("languages: "+e._s(e.user.languages[0]))]),e.loggedUser&&e.loggedUser._id===e.user._id?r("button",{on:{click:e.goToEditUser}},[e._v("Edit")]):r("button",{on:{click:e.openModal}},[e._v("Contact me")])])]),r("modal",{ref:"modal",attrs:{user:e.user,loggedUser:e.loggedUser}})],1),r("div",{staticClass:"detailsMain"},[r("h2",[e._v("Hi There! Nice to meet you")]),r("p",[e._v("\n      Lorem ipsum dolor sit amet\n      consectetur, adipisicing elit.\n      Illum similique quos veritatis\n      consequuntur molestias recusandae assumenda odit\n      sapiente officia eius id esse,\n      consectetur libero inventore at rem,\n      ad harum corporis.\n    ")]),r("p",[e._v("what we can do together:")]),e.user.reviews.length?r("div",[r("p",[e._v("Reviews:")]),r("p",[e._v("Title: "+e._s(e.user.reviews[0].title))]),r("p",[e._v("Comment: "+e._s(e.user.reviews[0].txt))]),r("p",[e._v("Added By :"+e._s(e.user.reviews[0].addedBy))]),r("p",[e._v("Rating: "+e._s(e.user.reviews[0].rating))])]):e._e(),e.user._id?r("ReviewAdd",{attrs:{userId:e.user._id},on:{saveReview:e.saveReview}}):e._e()],1)])},Ze=[],et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showModal?r("section",{staticClass:"modal"},[r("div",{staticClass:"modal",attrs:{id:"modal"}},[r("div",{staticClass:"overlay"}),r("div",{staticClass:"modal_content"},[r("h2",[e._v("Your message")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[e._v("\n       choose when to meet: "),r("input",{attrs:{type:"date",name:"bday"}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMsg.txt,expression:"newMsg.txt"}],attrs:{rows:"4",cols:"40"},domProps:{value:e.newMsg.txt},on:{input:function(t){t.target.composing||e.$set(e.newMsg,"txt",t.target.value)}}}),r("button",{staticClass:"send",attrs:{type:"submit"}},[e._v("Send")])]),r("button",{staticClass:"close_modal",attrs:{title:"Close"},on:{click:e.hide}},[r("i",{staticClass:"fas fa-times"})])])])]):e._e()},tt=[];function rt(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(r,!0).forEach(function(t){Object(Ge["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var it={created:function(){this.$store.dispatch("getLoggedUserId"),this.$store.dispatch("loadUserChatRooms")},name:"modal",props:["user","loggedUser"],data:function(){return{showModal:!1,newMsg:{txt:"",type:"txt",sentAt:"",addedBy:this.loggedUser._id,isRead:!1},usersIds:[this.user._id,this.loggedUser._id]}},components:{},methods:{toggleAboutModal:function(){this.isModal=!this.isModal},show:function(){this.showModal=!0},hide:function(){this.showModal=!1},sendMsg:function(){this.newMsg.sentAt=Date.now();var e=nt({},this.newMsg),t={addedMsg:e,usersIds:[this.user._id,this.loggedUser._id]};this.$store.dispatch("createChatRoom",{chatDetails:t})},isDate:function(){}},computed:{}},st=it,at=(r("0b32"),Object(l["a"])(st,et,tt,!1,null,"721bab43",null)),ot=at.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"review-add container"},[r("h2",[e._v("Add Review")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.emitSaveReview(t)}}},[r("div",{staticClass:"form-content-container"},[e._v("\n      Title:\n      "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.theReview.review.title,expression:"theReview.review.title"}],ref:"title",attrs:{type:"text",required:""},domProps:{value:e.theReview.review.title},on:{input:function(t){t.target.composing||e.$set(e.theReview.review,"title",t.target.value)}}}),e._v("\n      Added By:\n      "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.theReview.review.addedBy,expression:"theReview.review.addedBy"}],attrs:{type:"text",required:""},domProps:{value:e.theReview.review.addedBy},on:{input:function(t){t.target.composing||e.$set(e.theReview.review,"addedBy",t.target.value)}}}),e._v("\n      Rating:\n      "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.theReview.review.rating,expression:"theReview.review.rating"}],attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.theReview.review,"rating",t.target.multiple?r:r[0])}}},[r("option",[e._v("1")]),r("option",[e._v("2")]),r("option",[e._v("3")]),r("option",[e._v("4")]),r("option",[e._v("5")])]),e._v("\n      Comment:\n      "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.theReview.review.txt,expression:"theReview.review.txt",modifiers:{trim:!0}}],attrs:{placeholder:"add multiple lines",required:""},domProps:{value:e.theReview.review.txt},on:{input:function(t){t.target.composing||e.$set(e.theReview.review,"txt",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("button",{staticClass:"add-review"},[e._v("Save")])])])])},ct=[],lt={name:"review-add",props:["userId"],data:function(){return{theReview:{review:{title:"",addedBy:"Your Name",rating:"0",txt:""},userToReviewId:""}}},mounted:function(){this.$refs.title.focus()},created:function(){this.theReview.userToReviewId=this.userId},computed:{},methods:{emitSaveReview:function(){this.$emit("saveReview",this.theReview)}}},dt=lt,pt=Object(l["a"])(dt,ut,ct,!1,null,null,null),mt=pt.exports,vt=r("bc3a"),ht=r.n(vt),ft="/",gt=ht.a.create({withCredentials:!0});function yt(e){return wt.apply(this,arguments)}function wt(){return wt=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r,n,i,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"get",n=a.length>2&&void 0!==a[2]?a[2]:null,i=a.length>3?a[3]:void 0,e.next=5,gt({url:"".concat(ft).concat(t),method:r,data:n,params:i});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}},e)})),wt.apply(this,arguments)}var bt={ajax:yt},_t={query:Ut,getById:It,update:Ct,queryActivities:Ot,login:kt,logout:Mt,signup:Bt,getLoggedUser:Lt,setLoggedUserSessionStorage:At,addReview:qt},xt=JSON.parse(sessionStorage.getItem("loggedUser"));function Ct(e){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("user log in update userservice front: ",t),e.next=3,bt.ajax("api/user/".concat(t._id),"put",t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),Rt.apply(this,arguments)}function Ut(){return jt.apply(this,arguments)}function jt(){return jt=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},console.log(t),e.next=4,bt.ajax("api/user","get",null,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)})),jt.apply(this,arguments)}function Ot(e){return $t.apply(this,arguments)}function $t(){return $t=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("eze mashho ",t),e.next=3,bt.ajax("api/user/activities","get",null,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),$t.apply(this,arguments)}function It(e){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bt.ajax("api/user/".concat(t),"get");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),Nt.apply(this,arguments)}function kt(e){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(b["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bt.ajax("api/auth/login","post",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),Pt.apply(this,arguments)}function Bt(e){return St.apply(this,arguments)}function St(){return St=Object(b["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,bt.ajax("api/auth/signup","post",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),St.apply(this,arguments)}function Mt(){bt.ajax("api/auth/logout","post").then(function(e){return console.log(e)})}function Lt(){return xt}function At(e){sessionStorage.setItem("loggedUser",JSON.stringify(e))}function qt(e){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("thereview obj in addreview userservice front: ",t),e.next=3,bt.ajax("api/user/addreview/".concat(t.userToReviewId),"put",t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),Tt.apply(this,arguments)}var Et={name:"userDetails",data:function(){return{user:{_id:null,firstName:"",lastName:"",activities:[],reviews:[],img_url:"",currCity:"",languages:[]}}},computed:{loggedUser:function(){return this.$store.getters.loggedUser}},created:function(){this.loadUser()},methods:{openModal:function(){this.$refs.modal.show()},saveReview:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch({type:"addReview",theReview:t});case 2:r=e.sent,console.log("added review after add:",r),this.loadUser();case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),goToEditUser:function(){this.$router.push("/user/edit/".concat(this.user._id))},loadUser:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.userId,e.next=3,_t.getById(t);case 3:this.user=e.sent,console.log("this.user",this.user);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},components:{modal:ot,ReviewAdd:mt},watch:{"$route.params.userId":function(){this.loadUser()}}},Wt=Et,Dt=(r("4e99"),Object(l["a"])(Wt,Xe,Ze,!1,null,"40fc526c",null)),Ft=Dt.exports,Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"EditUser"},[r("div",{staticClass:"edit-user"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateUser(t)}}},[r("div",[r("label",[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),r("div",[r("label",[e._v("First name:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.firstName,expression:"user.firstName"}],attrs:{type:"text",required:""},domProps:{value:e.user.firstName},on:{input:function(t){t.target.composing||e.$set(e.user,"firstName",t.target.value)}}})]),r("div",[r("label",[e._v("Last name:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.lastName,expression:"user.lastName"}],attrs:{type:"text",required:""},domProps:{value:e.user.lastName},on:{input:function(t){t.target.composing||e.$set(e.user,"lastName",t.target.value)}}})]),r("div",[r("label",[e._v("City:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.currCity,expression:"user.currCity"}],attrs:{type:"text",required:""},domProps:{value:e.user.currCity},on:{input:function(t){t.target.composing||e.$set(e.user,"currCity",t.target.value)}}})]),r("div",[r("label",[e._v("Activities:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.activities,expression:"user.activities"}],attrs:{type:"text"},domProps:{value:e.user.activities},on:{input:function(t){t.target.composing||e.$set(e.user,"activities",t.target.value)}}})]),r("div",[r("label",[e._v("Languages:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.languages,expression:"user.languages"}],attrs:{type:"text",required:""},domProps:{value:e.user.languages},on:{input:function(t){t.target.composing||e.$set(e.user,"languages",t.target.value)}}})]),r("div",[r("label",[e._v("Profile picture:")]),r("input",{attrs:{type:"file"},on:{change:function(t){return e.uploadImg(t)}}})]),r("button",{staticClass:"btnUpdateUser"},[e._v("Update")])])])])},Gt=[],Ht={uploadImg:Jt};function Jt(e){var t="dcwibf9o5",r="https://api.cloudinary.com/v1_1/".concat(t,"/image/upload"),n=new FormData;return n.append("file",e.target.files[0]),n.append("upload_preset","vt0iqgff"),fetch(r,{method:"POST",body:n}).then(function(e){return e.json()}).then(function(e){return console.log(e),e}).catch(function(e){return console.error(error)})}var zt={name:"EditUser",data:function(){return{user:{email:"",firstName:"",lastName:"",currCity:"",newImg:""}}},created:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.userId,e.next=3,_t.getById(t);case 3:this.user=e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{updateUser:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch({type:"updateUser",user:this.user});case 2:e.sent,this.$router.push("/user/".concat(this.user._id));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),uploadImg:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ht.uploadImg(t);case 2:r=e.sent,this.user.newImg=r.url;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},computed:{},components:{}},Vt=zt,Kt=(r("a21b"),Object(l["a"])(Vt,Yt,Gt,!1,null,"13ffc641",null)),Qt=Kt.exports,Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login-or-signin"},[r("h1",[e._v("Login")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginCred.email,expression:"loginCred.email"}],attrs:{type:"text",placeholder:"email",required:""},domProps:{value:e.loginCred.email},on:{input:function(t){t.target.composing||e.$set(e.loginCred,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginCred.password,expression:"loginCred.password"}],attrs:{type:"text",placeholder:"password",required:""},domProps:{value:e.loginCred.password},on:{input:function(t){t.target.composing||e.$set(e.loginCred,"password",t.target.value)}}}),r("br"),r("button",{on:{click:e.doLogin}},[e._v("Login")]),r("hr"),r("h2",[e._v("Signup")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.email,expression:"signupCred.email"}],attrs:{type:"text",placeholder:"email",required:""},domProps:{value:e.signupCred.email},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.password,expression:"signupCred.password"}],attrs:{type:"text",placeholder:"password",required:""},domProps:{value:e.signupCred.password},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"password",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.firstName,expression:"signupCred.firstName"}],attrs:{type:"text",placeholder:"first name",required:""},domProps:{value:e.signupCred.firstName},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"firstName",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.lastName,expression:"signupCred.lastName"}],attrs:{type:"text",placeholder:"last name",required:""},domProps:{value:e.signupCred.lastName},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"lastName",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.activity,expression:"signupCred.activity"}],attrs:{type:"text",placeholder:"activity"},domProps:{value:e.signupCred.activity},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"activity",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.currCity,expression:"signupCred.currCity"}],attrs:{type:"text",placeholder:"current city",required:""},domProps:{value:e.signupCred.currCity},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"currCity",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.language,expression:"signupCred.language"}],attrs:{type:"text",placeholder:"language",required:""},domProps:{value:e.signupCred.language},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"language",t.target.value)}}}),r("br"),r("button",{on:{click:e.doSignup}},[e._v("Signup")]),r("hr")])},Zt=[],er={name:"loginOrSign",data:function(){return{loginCred:{},signupCred:{}}},methods:{doLogin:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.loginCred,t.email&&t.password){e.next=3;break}return e.abrupt("return",this.msg="Missing parameters");case 3:return e.next=5,this.$store.dispatch({type:"login",userCred:t});case 5:r=e.sent,console.log(r),this.$router.push({path:"/city/".concat(r.currCity),query:{activity:r.activities[0]}});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doSignup:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.signupCred,t.email&&t.password&&t.firstName&&t.lastName&&t.activity&&t.currCity&&t.language){e.next=3;break}return e.abrupt("return",this.msg="Missing parameters");case 3:return e.next=5,this.$store.dispatch({type:"signup",userCred:t});case 5:r=e.sent,this.$router.push({path:"/city/".concat(r.currCity),query:{activity:r.activities[0]}});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},tr=er,rr=(r("00a2"),Object(l["a"])(tr,Xt,Zt,!1,null,"2c860dfe",null)),nr=rr.exports,ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"main-container container"},[r("h1",[r("span",[e._v(e._s(e.activityName))])]),r("UserList",{attrs:{usersToShow:e.activityUsers}})],1)])},sr=[],ar={name:"TheActivityView",components:{UserList:K},data:function(){return{activityName:"",activity:"",cityName:""}},computed:{activityUsers:function(){return this.$store.getters.users}},methods:{filterUsersByActivity:function(e){return this.$store.getters.users.filter(function(t){return t.activities.includes(e)})}},created:function(){this.activityName=this.$route.params.activityName,this.cityName=this.$route.query.cityName,this.$store.dispatch({type:"loadUsersByActivity",filterBy:{activityName:this.activityName,cityName:this.cityName}})}},or=ar,ur=(r("3d04"),Object(l["a"])(or,ir,sr,!1,null,"d9bd11cc",null)),cr=ur.exports;n["a"].use(g["a"]);var lr=new g["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:pe},{path:"/signin",name:"login-or-sign",component:nr},{path:"/city/:cityName",name:"city-view",component:ye},{path:"/activity/:activityName",name:"activity-view",component:cr},{path:"/user/edit/:userId?",name:"edit-user",component:Qt},{path:"/user/:userId",name:"user-details",component:Ft},{path:"/inbox/:userId",name:"user-inbox",component:Ne,children:[{path:"chats",component:De},{path:":chatRoomId",component:Qe}]}]}),dr=r("2f62"),pr={query:mr};function mr(e,t){return vr.apply(this,arguments)}function vr(){return vr=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt.ajax("api/city");case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e["catch"](0),r.status(401).send({error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),vr.apply(this,arguments)}var hr={getReverseGeocode:fr};function fr(e,t){return gr.apply(this,arguments)}function gr(){return gr=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ht.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,",").concat(r,"&key=AIzaSyDp8q5Y7KiWO6Pg-0t2OiYniFD5vNvDAGY"));case 2:return n=e.sent,i=n.data.results[0].address_components[2].long_name,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)})),gr.apply(this,arguments)}var yr,wr={state:{cities:[]},getters:{cities:function(e){return e.cities}},mutations:{setCities:function(e,t){var r=t.cities;e.cities=r}},actions:{loadCities:function(e){pr.query().then(function(t){return e.commit({type:"setCities",cities:t})})},loadCitiesByFilters:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,pr.query(n);case 3:i=e.sent,t.commit({type:"setCities",cities:i});case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),getCityByCord:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.lat,i=r.lng,console.log(n,i),e.next=4,hr.getReverseGeocode(n,i);case 4:return s=e.sent,console.log("cityFromCord",s),e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}},br=(r("7514"),{state:{users:[],loggedUser:_t.getLoggedUser()},getters:{users:function(e){return e.users},userById:function(e){return function(t){return e.users.find(function(e){return e._id===t})}},loggedUser:function(e){return e.loggedUser}},mutations:{setUsers:function(e,t){var r=t.users;e.users=r},addUser:function(e,t){var r=t.addedUser;e.users.unshift(r)},updateLoggedInUser:function(e,t){var r=t.loggedInUser;e.loggedUser=r,_t.setLoggedUserSessionStorage(r)},updateLoggedInUserId:function(e,t){var r=t.loggedInUser;e.loggedInUserId=r._id}},actions:{loadUsers:function(e){_t.query().then(function(t){return e.commit({type:"setUsers",users:t})})},loadUsersByCity:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,_t.query(n);case 3:i=e.sent,t.commit({type:"setUsers",users:i});case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),loadUsersByActivity:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,_t.query(n);case 3:i=e.sent,t.commit({type:"setUsers",users:i});case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.user,e.next=3,_t.update(n);case 3:return i=e.sent,console.log("store",n.newImg),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.userCred,e.next=3,_t.login(n);case 3:return i=e.sent,t.commit({type:"updateLoggedInUser",loggedInUser:i}),t.commit({type:"updateLoggedInUserId",loggedInUser:i}),e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.userCred,e.next=3,_t.signup(n);case 3:return i=e.sent,t.commit({type:"addUser",addedUser:i}),t.commit({type:"updateLoggedInUser",loggedInUser:i}),t.commit({type:"updateLoggedInUserId",loggedInUser:i}),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),logout:function(e){_t.logout(),e.commit({type:"updateLoggedInUser",loggedInUser:null})},addReview:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.theReview,e.next=3,_t.addReview(n);case 3:return i=e.sent,console.log("addedreview",i),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}}),_r=(r("ffc1"),{query:xr,getById:Rr,addMsg:jr,add:Ir});function xr(e){return Cr.apply(this,arguments)}function Cr(){return Cr=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t),t){e.next=8;break}return e.next=4,defaultChatRooms;case 4:return yr=e.sent,e.abrupt("return",yr);case 8:return e.next=10,bt.ajax("api/chatroom","get",null,t);case 10:return r=e.sent,yr=r.filter(function(e){return e.usersIds.includes(t)}),e.abrupt("return",yr);case 13:case"end":return e.stop()}},e)})),Cr.apply(this,arguments)}function Rr(e){return Ur.apply(this,arguments)}function Ur(){return Ur=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bt.ajax("api/chatroom/".concat(t),"get");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),Ur.apply(this,arguments)}function jr(e,t){return Or.apply(this,arguments)}function Or(){return Or=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t._id=$r(),n={msg:t,chatroomId:r},e.next=4,bt.ajax("api/chatroom","put",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),Or.apply(this,arguments)}function $r(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Ir(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r._id=$r(),n={usersIds:t,msgs:[r]},console.log(n),e.next=5,bt.ajax("api/chatroom","post",n);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e)})),Nr.apply(this,arguments)}var kr={state:{userChats:[],loggedInUserId:"",chatsWith:[],chatRoom:{},chatWith:{},msgs:[]},getters:{userChats:function(e){return e.userChats},filterBy:function(e){return e.filterBy},userChatsWith:function(e){return e.chatsWith},userChatById:function(e){return function(t){return e.userChats.find(function(e){return e._id===t})}},chatRoom:function(e){return e.chatRoom},chatWith:function(e){return e.chatWith},msgs:function(e){return e.chatRoom.msgs},loggedInUserId:function(e){return e.loggedInUserId}},mutations:{setUserChats:function(e,t){var r=t.userChats;e.userChats=r},setUserChatsWith:function(e,t){var r=t.usersExceptMe;e.chatsWith=r},changeChatRoom:function(e,t){var r=t.chatRoom;e.chatRoom=r},changeChatWith:function(e,t){var r=t.otherPerson;e.chatWith=r},addChat:function(e,t){var r=t.addedChatRoom;e.userChats.unshift(r)},addMsg:function(e,t){var r=t.addedMsg;e.msgs.push(r)},setLoggedInUser:function(e,t){var r=t.loggedUserId;e.loggedInUserId=r}},actions:{getLoggedUserId:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_t.getLoggedUser();case 2:r=e.sent,n=r._id,t.commit({type:"setLoggedInUser",loggedUserId:n});case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),loadUserChatRooms:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r,n,i,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_t.getLoggedUser();case 2:return r=e.sent,n=r._id,t.commit({type:"setLoggedInUser",loggedUserId:n}),e.next=7,_r.query(n);case 7:return i=e.sent,t.commit({type:"setUserChats",userChats:i}),s=i.map(function(e){return e.usersIds.filter(function(e){return n!==e})}),a=[],e.next=13,s.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_t.getById(t[0]);case 2:r=e.sent,a.push(r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 13:t.commit({type:"setUserChatsWith",usersExceptMe:a});case 14:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),loadChat:function(e,t){var r=t.chatRoomId,n=e.state.loggedInUserId;_r.query(n).then(function(t){return _r.getById(r).then(function(t){e.commit({type:"changeChatRoom",chatRoom:t});var r=e.state.chatRoom.usersIds.filter(function(e){return n!==e}),i={};_t.getById(r[0]).then(function(e){return i=e}),e.commit({type:"changeChatWith",otherPerson:i})})})},addMsg:function(e,t){var r=t.addedMsg;console.log(e.state.chatRoom._id),_r.addMsg(r,e.state.chatRoom._id).then(function(t){return e.commit({type:"addMsg",addedMsg:r}),t})},createChatRoom:function(e,t){var r=t.chatDetails,n=!1;e.state.userChats.forEach(function(e){if(e.usersIds.includes(r.usersIds[0]||r.usersIds[1]))return console.log("chat already exists"),void(n=!0)}),n||(console.log("chat doesnt exist"),_r.add(r.usersIds,r.addedMsg).then(function(t){e.commit({type:"addChat",addedChatRoom:t})}))}}},Pr={query:Br};function Br(){return Sr.apply(this,arguments)}function Sr(){return Sr=Object(b["a"])(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},console.log(t),e.next=4,bt.ajax("api/activity/","get",null,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)})),Sr.apply(this,arguments)}var Mr={state:{activities:[]},getters:{activities:function(e){return e.activities}},mutations:{setActivities:function(e,t){var r=t.activities;e.activities=r}},actions:{loadActivities:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pr.query();case 2:r=e.sent,t.commit({type:"setActivities",activities:r});case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),loadActivityByCity:function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,Pr.query(n);case 3:i=e.sent,t.commit({type:"setActivities",activities:i});case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}};n["a"].use(dr["a"]);var Lr=new dr["a"].Store({state:{},mutations:{},actions:{},modules:{CityStore:wr,UserStore:br,ChatStore:kr,ActivityStore:Mr}}),Ar=r("9483");Object(Ar["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("b7e3");n["a"].config.productionTip=!1,new n["a"]({router:lr,store:Lr,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),i=r.n(n);i.a},"5e27":function(e,t,r){},"5e30":function(e,t,r){},"6c2a":function(e,t,r){"use strict";var n=r("9e70"),i=r.n(n);i.a},"80b8":function(e,t,r){},"8d32":function(e,t,r){},"911c":function(e,t,r){"use strict";var n=r("bf01"),i=r.n(n);i.a},9542:function(e,t,r){},9746:function(e,t,r){},"9b9d":function(e,t,r){"use strict";var n=r("15f1"),i=r.n(n);i.a},"9e70":function(e,t,r){},"9f64":function(e,t,r){},a21b:function(e,t,r){"use strict";var n=r("5e30"),i=r.n(n);i.a},ab20:function(e,t,r){},b17a:function(e,t,r){"use strict";var n=r("ab20"),i=r.n(n);i.a},b2e0:function(e,t,r){"use strict";var n=r("4e08"),i=r.n(n);i.a},b7e3:function(e,t,r){},bf01:function(e,t,r){},c14a:function(e,t,r){"use strict";var n=r("faff"),i=r.n(n);i.a},c669:function(e,t,r){"use strict";var n=r("48c6"),i=r.n(n);i.a},c9b0:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.e4595a89.png"},faff:function(e,t,r){},fb45:function(e,t,r){}});
//# sourceMappingURL=app.52efd657.js.map