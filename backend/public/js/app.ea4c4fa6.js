(function(e){function t(t){for(var n,a,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)a=o[d],s[a]&&p.push(s[a][0]),s[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==s[u]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},s={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00a2":function(e,t,r){"use strict";var n=r("0cf1"),s=r.n(n);s.a},"055a":function(e,t,r){"use strict";var n=r("f0f4"),s=r.n(n);s.a},"0cf1":function(e,t,r){},1527:function(e,t,r){"use strict";var n=r("54c8"),s=r.n(n);s.a},1719:function(e,t,r){"use strict";var n=r("aacd"),s=r.n(n);s.a},"1c0d":function(e,t,r){"use strict";var n=r("81d8"),s=r.n(n);s.a},2075:function(e,t,r){"use strict";var n=r("9f64"),s=r.n(n);s.a},3117:function(e,t,r){"use strict";var n=r("9542"),s=r.n(n);s.a},"37a5":function(e,t,r){"use strict";var n=r("ad18"),s=r.n(n);s.a},"45c3":function(e,t,r){"use strict";var n=r("fc36"),s=r.n(n);s.a},4619:function(e,t,r){},"51bc":function(e,t,r){"use strict";var n=r("80b8"),s=r.n(n);s.a},"54c8":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("AppNav",{staticClass:"nav-bar"}),r("router-view")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav"},[n("img",{staticClass:"logo",attrs:{alt:"logo",src:r("cf05")},on:{click:e.moveHome}}),n("ul",[n("li",[e.isLoggedUser?n("button",{on:{click:e.doLogout}},[e._v("Logout")]):e._e()]),n("li",[e.isLoggedUser?e._e():n("router-link",{attrs:{to:"/signin"}},[e._v("Sign in")])],1),n("li",[e.isLoggedUser?n("router-link",{attrs:{to:"/user/edit/u1"}},[e._v("User Profile")]):e._e()],1),n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Home")])],1),n("li",[e.isLoggedUser?n("h4",[e._v("Welcome "+e._s(e.isLoggedUser.firstName))]):e._e()])])])},o=[],u={name:"AppNav",computed:{isLoggedUser:function(){return this.$store.getters.loggedUser}},methods:{moveHome:function(){this.$router.push("/")},doLogout:function(){this.$store.dispatch({type:"logout"}),this.$router.push("/")}}},c=u,l=(r("d81e"),r("2877")),d=Object(l["a"])(c,a,o,!1,null,"1cd729a1",null),p=d.exports,h={components:{AppNav:p}},m=h,g=(r("9944"),Object(l["a"])(m,s,i,!1,null,"e4b89156",null)),f=g.exports,v=r("8c4f"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("header",{staticClass:"home-header"},[r("MainSearch",{staticClass:"welcome",attrs:{msg:"Welcome to uThere"}})],1),r("h2",[e._v("welcome you are in "+e._s(e.cityName))]),r("div",{staticClass:"users"},[r("UserList",{attrs:{usersToShow:e.allUsers}})],1),r("div",{staticClass:"cities"},[r("CityList")],1)])},b=[],w=(r("96cf"),r("3b8d")),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"MainSearch"},[r("h1",[e._v(e._s(e.msg))]),r("p",[e._v("\n    Meet people who love the some activities as you all over the world!\n    ")]),r("div",{staticClass:"searchBlock"},[r("form",{staticClass:"searchBlockTop",on:{submit:function(t){return t.preventDefault(),e.load(t)}}},[r("div",{staticClass:"searchBlockContainer"},[r("div",{staticClass:"SearchInputContainer"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.cityName,expression:"filterBy.cityName"}],staticClass:"SearchInput",attrs:{type:"text",placeholder:"Where are you going?"},domProps:{value:e.filterBy.cityName},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"cityName",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.activity,expression:"filterBy.activity"}],staticClass:"SearchInput",attrs:{type:"text",placeholder:"What would you like to do?"},domProps:{value:e.filterBy.activity},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"activity",t.target.value)}}})])]),r("button",{staticClass:"button"},[e._v("Search")])])])])},C=[],x={name:"MainSearch",props:{msg:String},data:function(){return{filterBy:{cityName:"",activity:""}}},created:function(){},methods:{load:function(){this.$router.push({path:"/city/".concat(this.filterBy.cityName),query:{fromSearchBox:"1",activity:this.filterBy.activity}})}}},U=x,R=(r("1c0d"),Object(l["a"])(U,_,C,!1,null,"d74e6c70",null)),O=R.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"city-list"},e._l(e.cities,function(e,t){return r("CityPreview",{key:t,attrs:{city:e}})}),1)},k=[],j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.city?r("section",{staticClass:"city-preview",on:{click:e.goToDetails}},[r("img",{attrs:{src:e.city.img_url}}),r("div",{staticClass:"info-panel"},[r("p",{staticClass:"name"},[e._v(e._s(e.city.name))])])]):e._e()},I=[],N=(r("7f7f"),{name:"TheCityPreview",props:["city"],methods:{goToDetails:function(){this.$router.push({path:"/city/".concat(this.city.name),query:{fromSearchBox:"0"}})}}}),S=N,B=(r("fbd0"),Object(l["a"])(S,j,I,!1,null,"7cdd1666",null)),M=B.exports,P={name:"TheCityList",components:{CityPreview:M},computed:{cities:function(){return this.$store.getters.cities}}},L=P,q=(r("1527"),Object(l["a"])(L,$,k,!1,null,"67abb598",null)),A=q.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-list"},e._l(e.usersToShow,function(e){return r("UserPreview",{key:e._id,attrs:{user:e}})}),1)},E=[],T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",{staticClass:"user-preview",on:{click:e.goToDetails}},[r("img",{attrs:{src:e.user.img_url}}),r("div",{staticClass:"info-panel"},[r("p",[e._v("Name: "+e._s(e.user.firstName))]),r("p",[e._v("City: "+e._s(e.user.currCity))]),r("p",[e._v("Rank: "+e._s(e.user.rank))]),r("p",[e._v("Meet Count: "+e._s(e.user.meetCount))]),r("p",[e._v("Activities: "+e._s(e.user.activities[0]))]),r("p",[e._v("Replies: "+e._s(e.user.replies))])])]):e._e()},D=[],J={name:"TheUserPreview",props:["user"],methods:{goToDetails:function(){this.$router.push("/user/".concat(this.user._id))}}},H=J,F=(r("bf3c"),Object(l["a"])(H,T,D,!1,null,"54ea998b",null)),G=F.exports,Y={name:"TheUserList",components:{UserPreview:G},props:["usersToShow"]},z=Y,K=(r("ea7c"),Object(l["a"])(z,W,E,!1,null,"819d5fca",null)),V=K.exports,Q={name:"home",data:function(){return{error:"",lat:"",lng:"",cityName:""}},methods:{showPosition:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.lat=t.coords.latitude,this.lng=t.coords.longitude,e.next=4,this.$store.dispatch({type:"getCityByCord",lat:this.lat,lng:this.lng});case 4:r=e.sent,this.cityName=r,console.log("type",r);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},components:{CityList:A,UserList:V,MainSearch:O},computed:{allUsers:function(){return this.$store.getters.users}},created:function(){this.$store.dispatch("loadCities"),this.$store.dispatch("loadUsers"),navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):this.error="Geolocation is not supported."}},X=Q,Z=(r("055a"),Object(l["a"])(X,y,b,!1,null,"2e890ed3",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"main-container"},[r("h1",[r("span",[e._v(e._s(e.cityName))]),e._v(" City\n    ")]),e.activity?r("div",{staticClass:"when-chosen-activity"},[r("h2",[e._v(e._s(e.activity))]),r("UserList",{attrs:{usersToShow:e.activityUsers}}),r("h2",[e._v("Dive")]),r("UserList",{attrs:{usersToShow:e.diveUsers}}),r("h2",[e._v("Fly")]),r("UserList",{attrs:{usersToShow:e.flyUsers}})],1):r("div",{staticClass:"default-activities"},[r("h2",[e._v("Drink coffee with friends")]),r("UserList",{attrs:{usersToShow:e.coffeeUsers}}),r("h2",[e._v("Walk")]),r("UserList",{attrs:{usersToShow:e.walkUsers}}),r("h2",[e._v("Run")]),r("UserList",{attrs:{usersToShow:e.runUsers}})],1)])])},re=[],ne=(r("6762"),r("2fdb"),{name:"TheCityView",components:{UserList:V},data:function(){return{cityName:"",activity:"",fromSearchBox:!1}},computed:{coffeeUsers:function(){return console.log(this.$store.getters.users),this.filterUsersByActivity("Drink coffee with a friend")},walkUsers:function(){return this.filterUsersByActivity("Walk")},runUsers:function(){return this.filterUsersByActivity("Run")},activityUsers:function(){return this.filterUsersByActivity(this.activity)},diveUsers:function(){return this.filterUsersByActivity("Dive")},flyUsers:function(){return this.filterUsersByActivity("Fly")}},methods:{filterUsersByActivity:function(e){return this.$store.getters.users.filter(function(t){return t.activities.includes(e)})}},created:function(){this.cityName=this.$route.params.cityName,this.fromSearchBox="1"===this.$route.query.fromSearchBox,this.activity=this.$route.query.activity,this.$store.dispatch({type:"loadUsersByCity",filterBy:{cityName:this.cityName}})}}),se=ne,ie=(r("849c"),Object(l["a"])(se,te,re,!1,null,"5659c66c",null)),ae=ie.exports,oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"wrapper"},[r("div",{staticClass:"side-bar"},[r("p",[e._v("I'm the side bar")]),r("inbox-nav")],1),r("div",{staticClass:"msg-container"},[r("p",[e._v("I'm the container for msgs")]),r("router-view")],1)])},ue=[],ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",[r("li",[r("router-link",{attrs:{exact:"",to:"/inbox/:userId/chats"}},[e._v("Messages")])],1),r("li",[e._v("Upcoming")])])])},le=[],de={data:function(){return{chats:[]}}},pe=de,he=Object(l["a"])(pe,ce,le,!1,null,null,null),me=he.exports,ge={components:{InboxNav:me},data:function(){return{chats:[]}}},fe=ge,ve=(r("3117"),Object(l["a"])(fe,oe,ue,!1,null,null,null)),ye=ve.exports,be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",e._l(e.pairingChatUsers,function(t,n){return r("li",{key:n,attrs:{chat:t.chat,userWith:t.userWith}},[r("chat-preview",{attrs:{chat:t.chat,userWith:t.userWith}}),r("router-link",{staticClass:"link",attrs:{to:"/inbox/:userId/"+t.chat._id}},[e._v("Read")])],1)}),0)])},we=[],_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.userWith&&e.chat?r("div",[r("img",{staticClass:"chat-img",attrs:{src:""+e.userWith.img_url,alt:"user-img"}}),e._v("\n    "+e._s(e.userWith.firstName)+" "+e._s(e.userWith.lastName)+"\n")]):e._e()},Ce=[],xe={props:["chat","userWith"],data:function(){return{}}},Ue=xe,Re=(r("51bc"),Object(l["a"])(Ue,_e,Ce,!1,null,null,null)),Oe=Re.exports,$e={data:function(){return{}},methods:{},computed:{userChats:function(){return this.$store.getters.userChats},userChatsWith:function(){return this.$store.getters.userChatsWith},pairingChatUsers:function(){var e=this;return this.userChats.map(function(t,r){return{chat:t,userWith:e.userChatsWith[r]}})}},created:function(){this.$store.dispatch("loadUserChatRooms")},components:{ChatPreview:Oe}},ke=$e,je=(r("2075"),Object(l["a"])(ke,be,we,!1,null,null,null)),Ie=je.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",e._l(e.chatRoom.msgs,function(t){return r("li",{key:t._id},[e._v(e._s(t.txt))])}),0),r("form",{staticClass:"send",on:{submit:function(t){return t.preventDefault(),e.addMsg(e.newMsg)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newMsg.txt,expression:"newMsg.txt"}],attrs:{newMsg:e.setType("txt"),type:"text",placeholder:"Write something...",name:"",id:""},domProps:{value:e.newMsg.txt},on:{input:function(t){t.target.composing||e.$set(e.newMsg,"txt",t.target.value)}}}),r("button",{attrs:{type:"submit"}},[e._v("Send")])])])},Se=[],Be=(r("8e6e"),r("ac6a"),r("456d"),r("bd86"));function Me(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(r,!0).forEach(function(t){Object(Be["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Le={data:function(){return{chatPrms:null,newMsg:{_id:null,addedBy:null,txt:null,type:null,sentAt:null,isRead:!1}}},methods:{addMsg:function(e){e.sentAt=Date.now();var t=Pe({},e);this.$store.dispatch("addMsg",{addedMsg:t}),e.txt=null},setType:function(e){this.newMsg.type=e}},computed:{chatRoom:function(){return this.$store.getters.chatRoom},chatWith:function(){return this.$store.getters.chatWith}},created:function(){this.$route.params.chatRoomId,this.chatPrms=this.$route.params.chatRoomId,this.$store.dispatch("loadChat",{chatRoomId:this.chatPrms})}},qe=Le,Ae=(r("b17a"),Object(l["a"])(qe,Ne,Se,!1,null,null,null)),We=Ae.exports,Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mainContainer"},[r("div",{staticClass:"detailsList"},[r("h1",[e._v(e._s(e.user.firstName+" "+e.user.lastName))]),r("img",{staticClass:"userSmallImg",attrs:{src:e.user.img_url,alt:""}}),r("h3",[e._v("from: "+e._s(e.user.currCity))]),r("h3",[e._v("like to: "+e._s(e.user.activities[0]))]),r("h3",[e._v("languages: "+e._s(e.user.languages[0]))]),r("modal",{ref:"modal"}),r("button",{on:{click:e.openModal}},[e._v("Contact me")])],1),r("div",{staticClass:"detailsMain"},[r("h2",[e._v("Hi There! Nice to meet you")]),r("p",[e._v("\n      Lorem ipsum dolor sit amet\n      consectetur, adipisicing elit.\n      Illum similique quos veritatis\n      consequuntur molestias recusandae assumenda odit\n      sapiente officia eius id esse,\n      consectetur libero inventore at rem,\n      ad harum corporis.\n    ")]),r("p",[e._v("what we can do together:")]),e.user.reviews.length?r("div",[r("p",[e._v("Reviews:")]),r("p",[e._v(e._s(e.user.reviews[0].title))]),r("p",[e._v(e._s(e.user.reviews[0].txt))]),r("p",[e._v("addedBy :"+e._s(e.user.reviews[0].addedBy))]),r("p",[e._v("createdAt :"+e._s(e.user.reviews[0].createdAt))]),r("p",[e._v("rating: "+e._s(e.user.reviews[0].rating))])]):e._e()])])},Te=[],De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showModal?r("section",{staticClass:"modal"},[r("div",{staticClass:"modal",attrs:{id:"modal"}},[r("div",{staticClass:"overlay"}),r("div",{staticClass:"modal_content"},[r("h2",[e._v("Your message")]),e._m(0),r("textarea",{attrs:{rows:"4",cols:"50"}}),r("button",{staticClass:"send",on:{click:e.send}},[e._v("Send")]),r("button",{staticClass:"close_modal",attrs:{title:"Close"},on:{click:e.hide}},[r("i",{staticClass:"fas fa-times"})])])])]):e._e()},Je=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{attrs:{action:"/action_page.php"}},[e._v("\n       choose when to meet: "),r("input",{attrs:{type:"date",name:"bday"}}),r("input",{attrs:{type:"submit"}})])}],He={name:"modal",data:function(){return{showModal:!1}},components:{},methods:{toggleAboutModal:function(){this.isModal=!this.isModal},show:function(){this.showModal=!0},hide:function(){this.showModal=!1}},computed:{}},Fe=He,Ge=(r("37a5"),Object(l["a"])(Fe,De,Je,!1,null,"a5cb1e40",null)),Ye=Ge.exports,ze={name:"userDetails",data:function(){return{user:{_id:null,firstName:"",lastName:"",activities:[],reviews:[],img_url:"",currCity:"",languages:[]}}},created:function(){var e=this,t=this.$route.params.userId;this.$store.dispatch({type:"loadUsers"}).then(function(){t?e.user=JSON.parse(JSON.stringify(e.$store.getters.userById(t))):e.$router.push("/user")})},methods:{openModal:function(){this.$refs.modal.show()}},components:{modal:Ye}},Ke=ze,Ve=(r("1719"),Object(l["a"])(Ke,Ee,Te,!1,null,"0b9fa93f",null)),Qe=Ve.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"EditUser"},[r("div",{staticClass:"edit-user"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[r("div",[r("label",[e._v("City:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.currCity,expression:"user.currCity"}],attrs:{type:"text"},domProps:{value:e.user.currCity},on:{input:function(t){t.target.composing||e.$set(e.user,"currCity",t.target.value)}}})]),r("div",[r("label",[e._v("Activities:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.Activities,expression:"user.Activities"}],attrs:{type:"text"},domProps:{value:e.user.Activities},on:{input:function(t){t.target.composing||e.$set(e.user,"Activities",t.target.value)}}})]),r("div",[r("label",[e._v("Languages:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.languages,expression:"user.languages"}],attrs:{type:"text"},domProps:{value:e.user.languages},on:{input:function(t){t.target.composing||e.$set(e.user,"languages",t.target.value)}}})]),r("button",{staticClass:"btnSaveUser"},[e._v("Save")])])])])},Ze=[],et={name:"EditUser",data:function(){return{user:{currCity:""}}},created:function(){var e=this,t=this.$store.state.loggedInUser;this.$store.dispatch({type:"loadUsers"}).then(function(){t&&(e.user=JSON.parse(JSON.stringify(e.$store.getters.userById(t))))})},methods:{saveUser:function(){this.$router.push("/")}},computed:{},components:{}},tt=et,rt=(r("45c3"),Object(l["a"])(tt,Xe,Ze,!1,null,"ab3c3cc6",null)),nt=rt.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login-or-signin"},[r("h1",[e._v("Login")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginCred.email,expression:"loginCred.email"}],attrs:{type:"text",placeholder:"email",required:""},domProps:{value:e.loginCred.email},on:{input:function(t){t.target.composing||e.$set(e.loginCred,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginCred.password,expression:"loginCred.password"}],attrs:{type:"text",placeholder:"password",required:""},domProps:{value:e.loginCred.password},on:{input:function(t){t.target.composing||e.$set(e.loginCred,"password",t.target.value)}}}),r("br"),r("button",{on:{click:e.doLogin}},[e._v("Login")]),r("hr"),r("h2",[e._v("Signup")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.email,expression:"signupCred.email"}],attrs:{type:"text",placeholder:"email",required:""},domProps:{value:e.signupCred.email},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"email",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.password,expression:"signupCred.password"}],attrs:{type:"text",placeholder:"password",required:""},domProps:{value:e.signupCred.password},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"password",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.firstName,expression:"signupCred.firstName"}],attrs:{type:"text",placeholder:"first name",required:""},domProps:{value:e.signupCred.firstName},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"firstName",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.lastName,expression:"signupCred.lastName"}],attrs:{type:"text",placeholder:"last name",required:""},domProps:{value:e.signupCred.lastName},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"lastName",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.activity,expression:"signupCred.activity"}],attrs:{type:"text",placeholder:"activity"},domProps:{value:e.signupCred.activity},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"activity",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.currCity,expression:"signupCred.currCity"}],attrs:{type:"text",placeholder:"current city",required:""},domProps:{value:e.signupCred.currCity},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"currCity",t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.language,expression:"signupCred.language"}],attrs:{type:"text",placeholder:"language",required:""},domProps:{value:e.signupCred.language},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"language",t.target.value)}}}),r("br"),r("button",{on:{click:e.doSignup}},[e._v("Signup")]),r("hr")])},it=[],at={name:"loginOrSign",data:function(){return{loginCred:{},signupCred:{}}},methods:{doLogin:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.loginCred,t.email&&t.password){e.next=3;break}return e.abrupt("return",this.msg="Missing parameters");case 3:return e.next=5,this.$store.dispatch({type:"login",userCred:t});case 5:r=e.sent,console.log(r),this.$router.push({path:"/city/".concat(r.currCity),query:{activity:r.activities[0]}});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doSignup:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.signupCred,t.email&&t.password&&t.firstName&&t.lastName&&t.activity&&t.currCity&&t.language){e.next=3;break}return e.abrupt("return",this.msg="Missing parameters");case 3:return e.next=5,this.$store.dispatch({type:"signup",userCred:t});case 5:r=e.sent,this.$router.push({path:"/city/".concat(r.currCity),query:{activity:r.activities[0]}});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},ot=at,ut=(r("00a2"),Object(l["a"])(ot,st,it,!1,null,"2c860dfe",null)),ct=ut.exports;n["a"].use(v["a"]);var lt=new v["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:ee},{path:"/signin",name:"login-or-sign",component:ct},{path:"/city/:cityName",name:"city-view",component:ae},{path:"/user/edit/:userId?",name:"edit-user",component:nt},{path:"/user/:userId",name:"user-details",component:Qe},{path:"/inbox/:userId",name:"user-inbox",component:ye,children:[{path:"chats",component:Ie},{path:":chatRoomId",component:We}]}]}),dt=r("2f62"),pt=r("bc3a"),ht=r.n(pt),mt="/",gt=ht.a.create({withCredentials:!0});function ft(e){return vt.apply(this,arguments)}function vt(){return vt=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r,n,s,i,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"get",n=a.length>2&&void 0!==a[2]?a[2]:null,s=a.length>3&&void 0!==a[3]?a[3]:null,e.next=5,gt({url:"".concat(mt).concat(t),method:r,data:n,params:s});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}},e)})),vt.apply(this,arguments)}var yt={ajax:ft},bt={query:wt};function wt(e,t){return _t.apply(this,arguments)}function _t(){return _t=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt.ajax("api/city");case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e["catch"](0),r.status(401).send({error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),_t.apply(this,arguments)}var Ct={getReverseGeocode:xt};function xt(e,t){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ht.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t,",").concat(r,"&key=AIzaSyDp8q5Y7KiWO6Pg-0t2OiYniFD5vNvDAGY"));case 2:return n=e.sent,s=n.data.results[0].address_components[2].long_name,e.abrupt("return",s);case 5:case"end":return e.stop()}},e)})),Ut.apply(this,arguments)}var Rt={state:{cities:[]},getters:{cities:function(e){return e.cities}},mutations:{setCities:function(e,t){var r=t.cities;e.cities=r}},actions:{loadCities:function(e){bt.query().then(function(t){return e.commit({type:"setCities",cities:t})})},loadCitiesByFilters:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,bt.query(n);case 3:s=e.sent,t.commit({type:"setCities",cities:s});case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),getCityByCord:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.lat,s=r.lng,console.log(n,s),e.next=4,Ct.getReverseGeocode(n,s);case 4:return i=e.sent,console.log("cityFromCord",i),e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}},Ot=(r("7514"),{query:It,getById:St,update:kt,login:Mt,logout:At,signup:Lt,getLoggedUser:Wt,setLoggedUserSessionStorage:Et}),$t=JSON.parse(sessionStorage.getItem("loggedUser"));function kt(){return jt.apply(this,arguments)}function jt(){return jt=Object(w["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),jt.apply(this,arguments)}function It(){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(w["a"])(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},console.log(t),e.next=4,yt.ajax("api/user","get",null,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)})),Nt.apply(this,arguments)}function St(e){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yt.ajax("api/user/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),Bt.apply(this,arguments)}function Mt(e){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(w["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yt.ajax("api/auth/login","post",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),Pt.apply(this,arguments)}function Lt(e){return qt.apply(this,arguments)}function qt(){return qt=Object(w["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,yt.ajax("api/auth/signup","post",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),qt.apply(this,arguments)}function At(){yt.ajax("api/auth/logout","post").then(function(e){return console.log(e)})}function Wt(){return $t}function Et(e){sessionStorage.setItem("loggedUser",JSON.stringify(e))}var Tt,Dt={state:{users:[],loggedUser:Ot.getLoggedUser()},getters:{users:function(e){return e.users},userById:function(e){return function(t){return e.users.find(function(e){return e._id===t})}},loggedUser:function(e){return console.log(e.loggedUser),e.loggedUser}},mutations:{setUsers:function(e,t){var r=t.users;e.users=r,console.log(e.users)},addUser:function(e,t){var r=t.addedUser;e.users.unshift(r),console.log(e.users)},updateLoggedInUser:function(e,t){var r=t.loggedInUser;e.loggedUser=r,Ot.setLoggedUserSessionStorage(r)},updateLoggedInUserId:function(e,t){var r=t.loggedInUser;e.loggedInUserId=r._id,console.log(e.loggedInUserId)}},actions:{loadUsers:function(e){Ot.query().then(function(t){return e.commit({type:"setUsers",users:t})})},loadUsersByCity:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.filterBy,e.next=3,Ot.query(n);case 3:s=e.sent,console.log(s),t.commit({type:"setUsers",users:s});case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),updateUser:function(e,t){var r=t.user;return Ot.update(r).then(function(t){return e.commit({type:"updateUser",updatedUser:t}),t})},login:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.userCred,e.next=3,Ot.login(n);case 3:return s=e.sent,console.log(s),t.commit({type:"updateLoggedInUser",loggedInUser:s}),t.commit({type:"updateLoggedInUserId",loggedInUser:s}),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.userCred,e.next=3,Ot.signup(n);case 3:return s=e.sent,console.log(s),t.commit({type:"addUser",addedUser:s}),t.commit({type:"updateLoggedInUser",loggedInUser:s}),t.commit({type:"updateLoggedInUserId",loggedInUser:s}),e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),logout:function(e){Ot.logout(),e.commit({type:"updateLoggedInUser",loggedInUser:null})}}},Jt={query:Ht,getById:Gt,addMsg:zt,add:Qt};function Ht(e){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(w["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return e.next=3,Zt;case 3:return Tt=e.sent,e.abrupt("return",Tt);case 7:return e.next=9,Zt.filter(function(e){return e.usersIds.includes(t)});case 9:return Tt=e.sent,e.abrupt("return",Tt);case 11:case"end":return e.stop()}},e)})),Ft.apply(this,arguments)}function Gt(e){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Tt.find(function(e){return e._id===t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),Yt.apply(this,arguments)}function zt(e,t){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t._id=Vt(),e.next=3,Gt(r);case 3:return n=e.sent,n.msgs.push(t),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)})),Kt.apply(this,arguments)}function Vt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Qt(e,t){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(w["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={_id:Vt(),usersIds:t,msgs:[r]},Tt.push(n),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)})),Xt.apply(this,arguments)}var Zt=[{_id:"u1001",usersIds:["5d2da4841b871768838cbf76","5d2da4841b871768838cbf77"],msgs:[{_id:"msg234",txt:"Okay",type:"txt",sentAt:1563021898186,addedBy:"u1",isRead:!0},{_id:"msg233",txt:"How about this date?",type:"dateReq",reqDetails:{suggested:"Jul 25th 2019, 4:00 pm",responseState:"pending"},sentAt:1563021549563,addedBy:"u2",isRead:!0}]},{_id:"u1002",usersIds:["5d2da4841b871768838cbf76","5d2da4841b871768838cbf78"],msgs:[{_id:"msg234",txt:"Okay",type:"txt",sentAt:1563021898186,addedBy:"u1",isRead:!0},{_id:"msg233",txt:"How about this date?",type:"dateReq",reqDetails:{suggested:"Jul 25th 2019, 4:00 pm",responseState:"pending"},sentAt:1563021549563,addedBy:"u3",isRead:!0}]},{_id:"u1003",usersIds:["5d2da4841b871768838cbf76","5d2da4841b871768838cbf79"],msgs:[{_id:"msg234",txt:"Okay",type:"txt",sentAt:1563021898186,addedBy:"u1",isRead:!0},{_id:"msg233",txt:"How about this date?",type:"dateReq",reqDetails:{suggested:"Jul 25th 2019, 4:00 pm",responseState:"pending"},sentAt:1563021549563,addedBy:"u4",isRead:!0}]},{_id:"u1004",usersIds:["5d2da4841b871768838cbf76","5d2da4841b871768838cbf7a"],msgs:[{_id:"msg234",txt:"Okay",type:"txt",sentAt:1563021898186,addedBy:"u1",isRead:!0},{_id:"msg233",txt:"How about this date?",type:"dateReq",reqDetails:{suggested:"Jul 25th 2019, 4:00 pm",responseState:"pending"},sentAt:1563021549563,addedBy:"u5",isRead:!0}]},{_id:"u1006",usersIds:["5d2da4841b871768838cbf7b","5d2da4841b871768838cbf7c"],msgs:[{_id:"msg234",txt:"Okay",type:"txt",sentAt:1563021898186,addedBy:"u2",isRead:!0},{_id:"msg233",txt:"How about this date?",type:"dateReq",reqDetails:{suggested:"Jul 25th 2019, 4:00 pm",responseState:"pending"},sentAt:1563021549563,addedBy:"u3",isRead:!0}]}],er={state:{userChats:[],loggedInUserId:"5d2da4841b871768838cbf76",chatsWith:[],chatRoom:{},chatWith:{},msgs:[]},getters:{userChats:function(e){return e.userChats},filterBy:function(e){return e.filterBy},userChatsWith:function(e){return e.chatsWith},userChatById:function(e){return function(t){return e.userChats.find(function(e){return e._id===t})}},chatRoom:function(e){return e.chatRoom},chatWith:function(e){return e.chatWith},msgs:function(e){return e.chatRoom.msgs}},mutations:{setUserChats:function(e,t){var r=t.userChats;e.userChats=r},setUserChatsWith:function(e,t){var r=t.usersExceptMe;e.chatsWith=r},changeChatRoom:function(e,t){var r=t.chatRoom;e.chatRoom=r},changeChatWith:function(e,t){var r=t.otherPerson;e.chatWith=r},addChat:function(e,t){var r=t.addedChatRoom;e.userChats.unshift(r)},addMsg:function(e,t){var r=t.addedMsg;e.msgs.push(r)}},actions:{loadUserChatRooms:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r,n,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state.loggedInUserId,e.next=3,Jt.query(r);case 3:return n=e.sent,t.commit({type:"setUserChats",userChats:n}),s=n.map(function(e){return e.usersIds.filter(function(e){return r!==e})}),i=[],e.next=9,s.forEach(function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot.getById(t[0]);case 2:r=e.sent,i.push(r);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:t.commit({type:"setUserChatsWith",usersExceptMe:i});case 10:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),loadChat:function(e,t){var r=t.chatRoomId,n=e.state.loggedInUserId;Jt.query(n).then(function(t){return Jt.getById(r).then(function(t){e.commit({type:"changeChatRoom",chatRoom:t});var r=e.state.chatRoom.usersIds.filter(function(e){return n!==e}),s={};Ot.getById(r[0]).then(function(e){return s=e}),e.commit({type:"changeChatWith",otherPerson:s})})})},addMsg:function(e,t){var r=t.addedMsg;Jt.addMsg(r,e.state.chatRoom._id).then(function(t){return e.commit({type:"addMsg",addedMsg:r}),t})}}};n["a"].use(dt["a"]);var tr=new dt["a"].Store({state:{},mutations:{},actions:{},modules:{CityStore:Rt,UserStore:Dt,ChatStore:er}}),rr=r("9483");Object(rr["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1,new n["a"]({router:lt,store:tr,render:function(e){return e(f)}}).$mount("#app")},"80b8":function(e,t,r){},"81d8":function(e,t,r){},"81e9":function(e,t,r){},"849c":function(e,t,r){"use strict";var n=r("81e9"),s=r.n(n);s.a},9542:function(e,t,r){},9944:function(e,t,r){"use strict";var n=r("e64a"),s=r.n(n);s.a},"9f64":function(e,t,r){},aacd:function(e,t,r){},ab20:function(e,t,r){},ad18:function(e,t,r){},b17a:function(e,t,r){"use strict";var n=r("ab20"),s=r.n(n);s.a},bf3c:function(e,t,r){"use strict";var n=r("f46a"),s=r.n(n);s.a},cf05:function(e,t,r){e.exports=r.p+"img/logo.e4595a89.png"},d3df:function(e,t,r){},d81e:function(e,t,r){"use strict";var n=r("4619"),s=r.n(n);s.a},e64a:function(e,t,r){},ea5f:function(e,t,r){},ea7c:function(e,t,r){"use strict";var n=r("d3df"),s=r.n(n);s.a},f0f4:function(e,t,r){},f46a:function(e,t,r){},fbd0:function(e,t,r){"use strict";var n=r("ea5f"),s=r.n(n);s.a},fc36:function(e,t,r){}});
//# sourceMappingURL=app.ea4c4fa6.js.map